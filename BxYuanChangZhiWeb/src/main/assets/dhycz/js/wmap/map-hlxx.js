$(function(){
    var bmap = bxmap.Map.createDefaultMap('olmap','vecMap'); //创建一个地图实例

    //添加图层
    var layerOp = new wmap.wlayers();
    layerOp.checkAddLayersToMap(bmap);

    //同步执行查询海湾
    var wkt = 'POLYGON ((117.38048769575062 23.63634098304999, 117.38059418627279 23.636380179102048, 117.38077016381203 23.636389035625541, 117.38102665855354 23.636380495663389, 117.38120492936412 23.6361611564123, 117.38158089634135 23.635194407695792, 117.38288265421113 23.633921899376219, 117.38547032839301 23.633190409709698, 117.38781291753219 23.633913202032716, 117.39170210137092 23.63651346132724, 117.39481437168592 23.638973555884945, 117.39760939805535 23.641709074114544, 117.40150485916195 23.6435945009855, 117.40554153811161 23.647913722640226, 117.41176199851748 23.653394425912097, 117.41362366260205 23.655550599980245, 117.41393011198511 23.657713071101398, 117.4146956652728 23.659146113802137, 117.4162549700909 23.660580448828682, 117.41702263049012 23.662026561376763, 117.4146403380812 23.665036735257161, 117.41419656671826 23.665601068834292, 117.41388315568315 23.666317636949429, 117.41423567193874 23.667426581071936, 117.41434257974629 23.667755120502477, 117.42039507197501 23.674810118492246, 117.42024297503337 23.675098985230022, 117.42023427499191 23.675533840714252, 117.41836524905705 23.676243151300469, 117.41694855603112 23.677092540288527, 117.41600113644336 23.679817133553911, 117.41615630546914 23.680687174573507, 117.41584296368194 23.680832174964962, 117.41536826823108 23.680676839564569, 117.41459281160905 23.679675046965883, 117.41366095388992 23.679094756717689, 117.41115765230393 23.678798235849968, 117.409916425103 23.677643324679764, 117.40600722055683 23.67748303131691, 117.40444669805674 23.67762112221709, 117.40366086056031 23.677473824057756, 117.4021004828511 23.676597226980505, 117.40054083988787 23.676310170577949, 117.39898101975837 23.676444747826906, 117.39820012583516 23.676871638015712, 117.3980369078771 23.677305964698576, 117.39787601016974 23.67801846338142, 117.3970882148493 23.678736437136934, 117.39630309321319 23.678869973870235, 117.39474776249926 23.678583013695174, 117.39286599227182 23.679145112457036, 117.39160898736498 23.681003732336421, 117.38721464174239 23.684003719596035, 117.38596273149494 23.68370502416758, 117.38205308088504 23.684549586494256, 117.38142261116468 23.685261928695127, 117.3814161333479 23.68598558976322, 117.38110322413456 23.686698104633876, 117.38077513796236 23.686756574956007, 117.380323216943 23.686834441856035, 117.37954510012628 23.686690440611414, 117.37876044973507 23.686259529553695, 117.37814103178323 23.685535397240812, 117.37768460785844 23.683952980745516, 117.376122224661 23.683087103587013, 117.37571381374153 23.683008783428647, 117.37534250345379 23.682943600566773, 117.37456276695821 23.682508862893769, 117.37254518741054 23.680487641991135, 117.37177658542112 23.678336187565037, 117.37272798720687 23.67690864241996, 117.3696135180495 23.674596015993416, 117.36899460102006 23.673872334240855, 117.36853642521589 23.6714319285407, 117.36744835255945 23.670999284489426, 117.36353023393326 23.67284802711481, 117.360079011837 23.675270463461175, 117.35616953749422 23.675678493068062, 117.35539209157184 23.67496558789162, 117.35461236137144 23.674667777396053, 117.3538304431205 23.674667545370994, 117.35257271156149 23.6760949772015, 117.35256623284545 23.676807786150448, 117.35287480912518 23.677533779160626, 117.35286817032988 23.678970161044163, 117.35176475703793 23.680402048116093, 117.35098506730708 23.680823443447196, 117.35019453265159 23.6809581421046, 117.34714529851681 23.683363371722294, 117.34671324262206 23.683617607366727, 117.34595100693343 23.684189156204638, 117.34554282534123 23.68463469473545, 117.3455103571174 23.684993418111787, 117.34566901821063 23.68555862403133, 117.3458319843586 23.686004271380057, 117.34626647921471 23.686323900327807, 117.34713539877964 23.687495707960579, 117.34772163894252 23.688428018937998, 117.34893548628372 23.68947983902342, 117.34941741767977 23.689918812503265, 117.34998230793724 23.691011984315651, 117.34966111596782 23.692439907176038, 117.34871434389197 23.694159197788792, 117.34949386544963 23.694311210194257, 117.35062728731953 23.693417871337715, 117.3518473426808 23.692450607309752, 117.35211446471089 23.692420108601198, 117.35260740650665 23.692522259894417, 117.35317215107398 23.692785157808828, 117.35364324563932 23.693095928434388, 117.35427277017232 23.693441434474664, 117.35506986808002 23.694117286683479, 117.35586012664362 23.694421523734377, 117.35669613821631 23.695251668130027, 117.35739757433862 23.695894919914679, 117.35789915052544 23.69619263508207, 117.3585441308071 23.696783707302302, 117.3585354469534 23.697507455604637, 117.36009675725961 23.698943957097981, 117.3616494295776 23.700100012205837, 117.36242269635045 23.701402007496711, 117.3625658630242 23.702838689753776, 117.36268108956074 23.703092943384661, 117.36288326345186 23.703553744309886, 117.36365429271154 23.704277631107857, 117.36523994137031 23.70520590233059, 117.36485781853355 23.70726846866495, 117.36471216793223 23.708072584881961, 117.36553744699563 23.708839955699432, 117.31585124393985 23.720882582065542, 117.31799243800072 23.65289534624327, 117.38048769575062 23.63634098304999))';
    var feature = layerOp.highlightWKTGeometry(bmap, 'HW_Highlight', wkt);

    //定位
    $("#map-w-location").click(function(){
        bmap.zoomToFeature(feature);
    });

    //切换底图
    $("#map-grouplayer-switcher").click(function(){
        var layerContainer = bmap.getLayerContainer();
        var group = layerContainer.getNextIndexBaseLayerGroup();
        layerContainer.setCurrentBaseLayerGroup(group);
        bmap.updateBaseLayerGroup(layerContainer);
    });
});